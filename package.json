{
  "name": "pccd",
  "private": true,
  "description": "Paremiologia catalana comparada digital",
  "license": "AGPL-3.0-only",
  "repository": "https://github.com/Softcatala/pccd.git",
  "author": "Pere Orga Esteve <pere@orga.cat>",
  "homepage": "https://pccd.dites.cat",
  "engines": {
    "node": ">=18.16"
  },
  "scripts": {
    "analysis": "concurrently -g --timings 'npm:analysis:*'",
    "analysis:phpstan": "tools/composer.phar run phpstan",
    "analysis:psalm": "tools/composer.phar run psalm",
    "analysis:rector": "tools/composer.phar run rector-lint",
    "build:assets": "scripts/build_assets.sh && npm run check:size",
    "build:docker": "npm run lint:dockerignore && npm run docker:images:include && scripts/docker_build.sh",
    "build:docker:alpine": "docker-compose -f docker-compose-alpine.yml up --build",
    "build:docker:spx": "scripts/docker_build.sh --build-arg profiler=spx",
    "build:docker:xhprof": "scripts/docker_build.sh --build-arg profiler=xhprof",
    "check:certificate": "scripts/check_certificate.sh",
    "check:code": "tools/composer.phar run parallel-lint && concurrently -g --timings npm:check:size npm:lint npm:analysis",
    "check:sitemap": "scripts/check_sitemap.sh",
    "check:size": "size-limit",
    "clean:temp": "rm -rf test-results/ && find tmp/ -maxdepth 1 -type f \\( -name '*.html' -o -name '*.json' ! -name assets-sizes.json \\) -delete && find . -maxdepth 1 -type f -name '*.html' -delete",
    "convert:db": "scripts/convert_db.sh",
    "decompress:images": "scripts/decompress_images.sh",
    "delete:images": "find docroot/img/imatges/ docroot/img/obres/ -mindepth 1 -delete",
    "docker:images:ignore": "npm run --silent lint:dockerignore:images || echo 'src/images' >> .dockerignore",
    "docker:images:include": "if strings \"$(command -v sed)\" | grep -q -F -m 1 \"FreeBSD\"; then sed -i '' '/^src\\/images$/d' .dockerignore; else sed -i '/^src\\/images$/d' .dockerignore; fi",
    "docker:sh": "docker exec -it pccd-web /bin/bash",
    "docker:alpine:sh": "docker exec -it pccd-web-alpine /bin/sh",
    "docker:up": "docker-compose up",
    "docker:alpine:up": "docker-compose -f docker-compose-alpine.yml up",
    "export:asset-sizes": "size-limit --json | jq '[.[] | {name: .name, size: .size}]' > tmp/assets-sizes.json",
    "export:code": "npm run clean:temp && scripts/export_code.sh",
    "export:commonvoice": "scripts/common-voice-export/export.sh",
    "export:db": "scripts/export_db.sh",
    "fix": "concurrently -g --timings 'npm:fix:*' && npm run fix-format",
    "fix:composer": "tools/composer.phar run composer-normalize",
    "fix:dotenv": "dotenv-linter fix",
    "fix:eslint": "eslint --fix 'scripts/*.js' 'src/js/*.js' 'tests/*/*.js'",
    "fix:rector": "tools/composer.phar run rector",
    "fix:stylelint": "stylelint --fix src/css/",
    "fix:statix": "statix fix .",
    "fix-format": "concurrently -g --timings 'npm:fix-format:*'",
    "fix-format:php-cs-fixer": "tools/composer.phar run php-cs-fixer",
    "fix-format:phpcbf": "tools/composer.phar run phpcbf",
    "fix-format:prettier": "prettier --write .",
    "fix-format:shfmt": "shfmt -l -w .",
    "fix-format:yamlfmt": "yamlfmt",
    "generate:reports": "concurrently -g --timings 'npm:generate:reports:*'; scripts/aggregate_reports.sh",
    "generate:reports:background-tests-fonts_urls": "docker exec pccd-web php scripts/background_tests.php fonts_urls > tmp/test_fonts_URL.txt",
    "generate:reports:background-tests-html_escape_and_link_urls": "docker exec pccd-web php scripts/background_tests.php html_escape_and_link_urls > tmp/test_html_escape_and_link_urls.txt",
    "generate:reports:background-tests-imatges_links_part1": "docker exec pccd-web php scripts/background_tests.php imatges_links 0 1500 > tmp/test_tmp_imatges_URL_ENLLAC_1.txt",
    "generate:reports:background-tests-imatges_links_part2": "docker exec pccd-web php scripts/background_tests.php imatges_links 1500 3000 > tmp/test_tmp_imatges_URL_ENLLAC_2.txt",
    "generate:reports:background-tests-imatges_links_part3": "docker exec pccd-web php scripts/background_tests.php imatges_links 3000 3500 > tmp/test_tmp_imatges_URL_ENLLAC_3.txt",
    "generate:reports:background-tests-imatges_links_part4": "docker exec pccd-web php scripts/background_tests.php imatges_links 3500 > tmp/test_tmp_imatges_URL_ENLLAC_4.txt",
    "generate:reports:background-tests-imatges_urls_part1": "docker exec pccd-web php scripts/background_tests.php imatges_urls 0 2000 > tmp/test_tmp_imatges_URL_IMATGE_1.txt",
    "generate:reports:background-tests-imatges_urls_part2": "docker exec pccd-web php scripts/background_tests.php imatges_urls 2000 4000 > tmp/test_tmp_imatges_URL_IMATGE_2.txt",
    "generate:reports:background-tests-imatges_urls_part3": "docker exec pccd-web php scripts/background_tests.php imatges_urls 4000 > tmp/test_tmp_imatges_URL_IMATGE_3.txt",
    "generate:reports:background-tests-imatges_no_existents": "docker exec pccd-web php scripts/background_tests.php imatges_no_existents > tmp/test_imatges_no_existents.txt",
    "generate:reports:background-tests-imatges_duplicades": "docker exec pccd-web php scripts/background_tests.php imatges_duplicades > tmp/test_imatges_duplicades.txt",
    "generate:reports:background-tests-imatges_no_referenciades": "docker exec pccd-web php scripts/background_tests.php imatges_no_referenciades > tmp/test_imatges_no_referenciades.txt",
    "generate:reports:background-tests-llibres_urls": "docker exec pccd-web php scripts/background_tests.php llibres_urls > tmp/test_llibres_URL.txt",
    "generate:reports:background-tests-paremiotipus_repetits_part1": "docker exec pccd-web php scripts/background_tests.php paremiotipus_repetits 0 12000 > tmp/test_tmp_repetits_1.txt",
    "generate:reports:background-tests-paremiotipus_repetits_part2": "docker exec pccd-web php scripts/background_tests.php paremiotipus_repetits 12000 28000 > tmp/test_tmp_repetits_2.txt",
    "generate:reports:background-tests-paremiotipus_repetits_part3": "docker exec pccd-web php scripts/background_tests.php paremiotipus_repetits 28000 > tmp/test_tmp_repetits_3.txt",
    "generate:reports:check-images": "scripts/check_images.sh > /dev/null",
    "generate:reports:sinonims": "docker exec pccd-web php scripts/sinonims-export/app.php > scripts/sinonims-export/sinonims_strict.txt 2> scripts/sinonims-export/sinonims.txt",
    "generate:reports:small-images": "php scripts/image-convertor/small_images_reporter.php > tmp/test_imatges_petites.txt",
    "generate:reports:unsupported-image-extensions": "php scripts/image-convertor/unsupported_image_extensions_reporter.php > tmp/test_imatges_file_extensions.txt",
    "import:commonvoice": "scripts/common-voice-export/import.sh",
    "install:db": "scripts/install.sh",
    "lint": "concurrently -g --timings 'npm:lint:*'",
    "lint:composer": "tools/composer.phar validate --strict",
    "lint:config-prettier": "eslint-config-prettier 'scripts/*.js' 'src/js/*.js' 'tests/*/*.js'",
    "lint:css": "stylelint src/css/",
    "lint:docker": "hadolint .docker/*Dockerfile",
    "lint:dockerignore": "test -f .dockerignore",
    "lint:dockerignore:images": "grep -qxe '^src/images$' .dockerignore",
    "lint:dotenv": "dotenv-linter",
    "lint:eslint": "eslint --report-unused-disable-directives 'scripts/*.js' 'src/js/*.js' 'tests/*/*.js'",
    "lint:markdown": "markdownlint *.md",
    "lint:php-cs-fixer": "tools/composer.phar run php-cs-fixer-lint",
    "lint:phpcs": "tools/composer.phar run phpcs",
    "lint:prettier": "prettier --log-level log --check .",
    "lint:shellcheck": "for file in $(find scripts -type f -name '*.sh' -not -name '*.generated.sh'); do shellcheck \"$file\" || exit 1; done",
    "lint:shfmt": "shfmt -l -d .",
    "lint:statix": "statix check .",
    "lint:xml": "xmllint --noout *.xml docroot/*.xml .phive/phars.xml",
    "lint:yamlfmt": "yamlfmt -lint -quiet",
    "lint:yamllint": "yamllint . --strict",
    "optimize:images": "php scripts/image-convertor/app.php",
    "optimize:svg": "svgo --eol lf --multipass -r --folder docroot/img",
    "outdated": "concurrently -g --timings 'npm:outdated:*'",
    "outdated:composer": "tools/composer.phar outdated --direct",
    "outdated:phive": "php -d memory_limit=256M tools/phive outdated",
    "outdated:npm": "npm outdated",
    "postinstall": "yes | php -d memory_limit=256M tools/phive install --force-accept-unsigned && tools/composer.phar install && npx playwright install",
    "prepare": "husky",
    "prepare:deploy": "npm run export:db && npm run refresh:test-data && npm run test && npm run export:commonvoice && npm run generate:reports && npm run docker:images:ignore",
    "refresh:test-data": "node scripts/refresh-test-data.js",
    "start": "docker-compose up",
    "test": "npm run test:e2e && npm run test:phpunit && npm run test:html-quality && npm run test:core-vitals && npm run check:certificate",
    "test:core-vitals": "scripts/audit_website.sh",
    "test:e2e": "playwright test",
    "test:html-quality": "scripts/validate_website.sh",
    "test:phpunit": "tools/composer.phar run phpunit",
    "update": "concurrently -g --timings 'npm:update:*(!brew)'",
    "update-all": "concurrently -g --timings 'npm:update:*'",
    "update-nix": "scripts/update.sh nixpkgs",
    "update:apc-gui": "scripts/update.sh apc-gui",
    "update:brew": "scripts/update.sh brew",
    "update:composer": "scripts/update.sh composer",
    "update:docker": "concurrently --restart-tries -1 'scripts/update.sh docker'",
    "update:opcache-gui": "scripts/update.sh opcache-gui",
    "update:oxipng": "scripts/update.sh oxipng",
    "update:phive": "scripts/update.sh phive",
    "update:npm": "scripts/update.sh npm"
  },
  "keywords": [
    "catalan",
    "català",
    "common voice",
    "diccionari",
    "dites populars",
    "frases fetes",
    "idioms",
    "locucions",
    "online dictionary",
    "paremiologia",
    "paremiotipus",
    "parèmies",
    "proverbs",
    "proverbis",
    "refranys"
  ],
  "devDependencies": {
    "@playwright/test": "^1.42.1",
    "@size-limit/file": "^11.0.2",
    "clean-css-cli": "^5.6.3",
    "concurrently": "^8.2.2",
    "dotenv": "^16.4.5",
    "editorconfig-checker": "^5.1.5",
    "eslint": "^8.57.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-regexp": "^2.3.0",
    "eslint-plugin-unicorn": "^51.0.1",
    "html-validate": "^8.15.0",
    "htmlhint": "^1.1.4",
    "husky": "^9.0.11",
    "lighthouse": "^11.6.0",
    "linkinator": "^6.0.4",
    "markdownlint-cli": "^0.39.0",
    "prettier": "^3.2.5",
    "size-limit": "^11.0.2",
    "stylelint": "^16.2.1",
    "stylelint-config-recess-order": "^4.6.0",
    "stylelint-config-standard": "^36.0.0",
    "svgo": "^3.2.0",
    "terser": "^5.29.1"
  }
}
