/*! Desenvolupat per Pere Orga <pere@orga.cat>, 2020. */
window.dataLayer=window.dataLayer||[];const gtag=function(){dataLayer.push(arguments)};gtag("js",new Date),gtag("config","G-CP42Y3NK1R"),(()=>{const e=()=>{const e=document.querySelector("#toggle-all"),t=e.textContent.startsWith("Contrau");e.textContent=t?"Desplega-ho tot":"Contrau-ho tot",e.setAttribute("title",(t?"Mostra":"Amaga")+" els detalls de cada font");for(const e of document.querySelectorAll("details"))e.toggleAttribute("open",!t)},t=document.querySelector("input[type=search]");if(t){const e=document.querySelector("#variant"),o=document.querySelector("#sinonim"),a=document.querySelector("#equivalent"),n=document.querySelector("a[rel=next]"),r=document.querySelector("a[rel=prev]"),c=document.querySelector(".pager select");if(""===t.value&&(e.checked="2"!==localStorage.getItem("variant"),o.checked="1"===localStorage.getItem("sinonim"),a.checked="1"===localStorage.getItem("equivalent"),!r&&n)){const e=localStorage.getItem("mostra");e&&e!==c.value&&location.assign("/?mostra="+e)}e.addEventListener("change",(()=>{localStorage.setItem("variant",e.checked?"1":"2")})),o.addEventListener("change",(()=>{localStorage.setItem("sinonim",o.checked?"1":"")})),a.addEventListener("change",(()=>{localStorage.setItem("equivalent",a.checked?"1":"")})),c.addEventListener("change",(()=>{localStorage.setItem("mostra","10"===c.value?"":c.value),document.querySelector("form[role=search]").submit()})),window.addEventListener("pageshow",(()=>{const e=new URLSearchParams(location.search).get("cerca")||"";t.value=e.trim(),""===t.value||/Android|iPad|iPhone/.test(navigator.userAgent)||t.select()})),t.addEventListener("touchend",(()=>{if(""!==t.value){t.selectionStart-t.selectionEnd||t.select()}}))}else{const t=document.querySelector("#toggle-all");t&&("2"===localStorage.getItem("always_expand")&&e(),t.addEventListener("click",(t=>{e(),localStorage.setItem("always_expand",t.target.textContent.startsWith("Desplega")?"2":"1")})));for(const e of document.querySelectorAll(".audio"))e.addEventListener("click",(t=>{t.preventDefault(),e.firstElementChild.play()}));for(const e of document.querySelectorAll('[role="button"]'))e.addEventListener("keydown",(t=>{" "===t.key&&(t.preventDefault(),e.click())}))}if("1"!==localStorage.getItem("accept_cookies")){const e=document.querySelector("#cookie-banner");e.classList.remove("d-none"),e.querySelector("button").addEventListener("click",(()=>{e.remove(),localStorage.setItem("accept_cookies","1")}))}document.querySelector("header button").addEventListener("click",(()=>{document.querySelector("header nav").classList.toggle("d-none")}));const o=new Set,a=e=>{const t=e.currentTarget;if(!o.has(t.href)){o.add(t.href);const e=document.createElement("link");e.href=t.href,e.rel="prefetch",document.head.append(e)}};for(const e of document.querySelectorAll("a"))e.href&&e.origin===location.origin&&(e.addEventListener("mouseenter",a),e.addEventListener("touchstart",a,{passive:!0}))})();
