/*! Desenvolupat per Pere Orga <pere@orga.cat>, 2020. */
window.dataLayer=window.dataLayer||[];const gtag=function(){dataLayer.push(arguments)};gtag("js",new Date),gtag("config","G-CP42Y3NK1R"),function(){const e=function(){const e=document.querySelector("#toggle-all"),t=e.textContent.startsWith("Contrau");e.textContent=t?"Desplega-ho tot":"Contrau-ho tot",e.setAttribute("title",(t?"Mostra":"Amaga")+" els detalls de cada font");for(const e of document.querySelectorAll("details"))t?e.removeAttribute("open"):e.setAttribute("open","true")},t=document.querySelector("input[type=search]");if(t){const e=document.querySelector("#variant"),o=document.querySelector("#sinonim"),n=document.querySelector("#equivalent"),r=document.querySelector("a[rel=next]"),a=document.querySelector("a[rel=prev]"),c=document.querySelector(".pager select");if(""===t.value&&(e.checked="2"!==localStorage.getItem("variant"),o.checked="1"===localStorage.getItem("sinonim"),n.checked="1"===localStorage.getItem("equivalent"),!a&&r)){const e=localStorage.getItem("mostra");e&&e!==c.value&&location.assign("/?mostra="+e)}e.addEventListener("change",(()=>{localStorage.setItem("variant",e.checked?"1":"2")})),o.addEventListener("change",(()=>{localStorage.setItem("sinonim",o.checked?"1":"")})),n.addEventListener("change",(()=>{localStorage.setItem("equivalent",n.checked?"1":"")})),c.addEventListener("change",(()=>{localStorage.setItem("mostra","10"===c.value?"":c.value),document.querySelector("form[role=search]").submit()})),document.addEventListener("keydown",(e=>{e.ctrlKey&&("ArrowRight"===e.key&&r?location.assign(r.getAttribute("href")):"ArrowLeft"===e.key&&a&&location.assign(a.getAttribute("href")))})),window.addEventListener("pageshow",(()=>{const e=new URLSearchParams(location.search).get("cerca")||"";t.value=e.trim(),""===t.value||/iPhone|iPad|iPod|Android/.test(navigator.userAgent)||t.select()})),t.addEventListener("touchend",(()=>{if(""!==t.value){t.selectionStart-t.selectionEnd||t.select()}}))}else{const t=document.querySelector("#toggle-all");t&&("2"===localStorage.getItem("always_expand")&&e(),t.addEventListener("click",(t=>{e(),localStorage.setItem("always_expand",t.target.textContent.startsWith("Desplega")?"2":"1")})));for(const e of document.querySelectorAll(".audio"))e.addEventListener("click",(t=>{t.preventDefault(),e.firstElementChild.play()}));for(const e of document.querySelectorAll('[role="button"]'))e.addEventListener("keydown",(t=>{" "===t.key&&(t.preventDefault(),e.click())}))}if("1"!==localStorage.getItem("accept_cookies")){const e=document.querySelector("#cookie-banner");e.classList.remove("d-none"),e.querySelector("button").addEventListener("click",(()=>{e.remove(),localStorage.setItem("accept_cookies","1")}))}document.querySelector("header button").addEventListener("click",(()=>{document.querySelector("#menu").classList.toggle("d-none")})),document.addEventListener("keydown",(e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&location.assign("/")}));const o=new Set,n=function(e){const t=e.currentTarget;if(!o.has(t.href)){o.add(t.href);const e=document.createElement("link");e.href=t.href,e.rel="prefetch",document.head.append(e)}};for(const e of document.querySelectorAll("a"))e.href&&e.origin===location.origin&&(e.addEventListener("mouseenter",n),e.addEventListener("touchstart",n,{passive:!0}));if(navigator.platform.startsWith("Mac")){document.querySelector('a[rel="home"]').title="Cerca (premeu ⌘K)";const e=document.querySelector('a[rel="next"]');e&&(e.title="Pàgina següent (premeu ^⇧→)");const t=document.querySelector('a[rel="prev"]');t&&(t.title="Pàgina següent (premeu ^⇧←)")}}();
